{"ast":null,"code":"/**\n * Module dependencies.\n */\nvar format = require('util').format;\nvar isArray = require('util').isArray;\n\n/**\n * Expose `flash()` function on requests.\n *\n * @return {Function}\n * @api public\n */\nmodule.exports = function flash(options) {\n  options = options || {};\n  var safe = options.unsafe === undefined ? true : !options.unsafe;\n  return function (req, res, next) {\n    if (req.flash && safe) {\n      return next();\n    }\n    req.flash = _flash;\n    next();\n  };\n};\n\n/**\n * Queue flash `msg` of the given `type`.\n *\n * Examples:\n *\n *      req.flash('info', 'email sent');\n *      req.flash('error', 'email delivery failed');\n *      req.flash('info', 'email re-sent');\n *      // => 2\n *\n *      req.flash('info');\n *      // => ['email sent', 'email re-sent']\n *\n *      req.flash('info');\n *      // => []\n *\n *      req.flash();\n *      // => { error: ['email delivery failed'], info: [] }\n *\n * Formatting:\n *\n * Flash notifications also support arbitrary formatting support.\n * For example you may pass variable arguments to `req.flash()`\n * and use the %s specifier to be replaced by the associated argument:\n *\n *     req.flash('info', 'email has been sent to %s.', userName);\n *\n * Formatting uses `util.format()`, which is available on Node 0.6+.\n *\n * @param {String} type\n * @param {String} msg\n * @return {Array|Object|Number}\n * @api public\n */\nfunction _flash(type, msg) {\n  if (this.session === undefined) throw Error('req.flash() requires sessions');\n  var msgs = this.session.flash = this.session.flash || {};\n  if (type && msg) {\n    // util.format is available in Node.js 0.6+\n    if (arguments.length > 2 && format) {\n      var args = Array.prototype.slice.call(arguments, 1);\n      msg = format.apply(undefined, args);\n    } else if (isArray(msg)) {\n      msg.forEach(function (val) {\n        (msgs[type] = msgs[type] || []).push(val);\n      });\n      return msgs[type].length;\n    }\n    return (msgs[type] = msgs[type] || []).push(msg);\n  } else if (type) {\n    var arr = msgs[type];\n    delete msgs[type];\n    return arr || [];\n  } else {\n    this.session.flash = {};\n    return msgs;\n  }\n}","map":{"version":3,"names":["format","require","isArray","module","exports","flash","options","safe","unsafe","undefined","req","res","next","_flash","type","msg","session","Error","msgs","arguments","length","args","Array","prototype","slice","call","apply","forEach","val","push","arr"],"sources":["C:/Users/edith_000/Documents/Cecyt 9/bureau manager/respladito/bureau-project/node_modules/connect-flash/lib/flash.js"],"sourcesContent":["/**\n * Module dependencies.\n */\nvar format = require('util').format;\nvar isArray = require('util').isArray;\n\n\n/**\n * Expose `flash()` function on requests.\n *\n * @return {Function}\n * @api public\n */\nmodule.exports = function flash(options) {\n  options = options || {};\n  var safe = (options.unsafe === undefined) ? true : !options.unsafe;\n  \n  return function(req, res, next) {\n    if (req.flash && safe) { return next(); }\n    req.flash = _flash;\n    next();\n  }\n}\n\n/**\n * Queue flash `msg` of the given `type`.\n *\n * Examples:\n *\n *      req.flash('info', 'email sent');\n *      req.flash('error', 'email delivery failed');\n *      req.flash('info', 'email re-sent');\n *      // => 2\n *\n *      req.flash('info');\n *      // => ['email sent', 'email re-sent']\n *\n *      req.flash('info');\n *      // => []\n *\n *      req.flash();\n *      // => { error: ['email delivery failed'], info: [] }\n *\n * Formatting:\n *\n * Flash notifications also support arbitrary formatting support.\n * For example you may pass variable arguments to `req.flash()`\n * and use the %s specifier to be replaced by the associated argument:\n *\n *     req.flash('info', 'email has been sent to %s.', userName);\n *\n * Formatting uses `util.format()`, which is available on Node 0.6+.\n *\n * @param {String} type\n * @param {String} msg\n * @return {Array|Object|Number}\n * @api public\n */\nfunction _flash(type, msg) {\n  if (this.session === undefined) throw Error('req.flash() requires sessions');\n  var msgs = this.session.flash = this.session.flash || {};\n  if (type && msg) {\n    // util.format is available in Node.js 0.6+\n    if (arguments.length > 2 && format) {\n      var args = Array.prototype.slice.call(arguments, 1);\n      msg = format.apply(undefined, args);\n    } else if (isArray(msg)) {\n      msg.forEach(function(val){\n        (msgs[type] = msgs[type] || []).push(val);\n      });\n      return msgs[type].length;\n    }\n    return (msgs[type] = msgs[type] || []).push(msg);\n  } else if (type) {\n    var arr = msgs[type];\n    delete msgs[type];\n    return arr || [];\n  } else {\n    this.session.flash = {};\n    return msgs;\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,IAAIA,MAAM,GAAGC,OAAO,CAAC,MAAM,CAAC,CAACD,MAAM;AACnC,IAAIE,OAAO,GAAGD,OAAO,CAAC,MAAM,CAAC,CAACC,OAAO;;AAGrC;AACA;AACA;AACA;AACA;AACA;AACAC,MAAM,CAACC,OAAO,GAAG,SAASC,KAAKA,CAACC,OAAO,EAAE;EACvCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAIC,IAAI,GAAID,OAAO,CAACE,MAAM,KAAKC,SAAS,GAAI,IAAI,GAAG,CAACH,OAAO,CAACE,MAAM;EAElE,OAAO,UAASE,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9B,IAAIF,GAAG,CAACL,KAAK,IAAIE,IAAI,EAAE;MAAE,OAAOK,IAAI,CAAC,CAAC;IAAE;IACxCF,GAAG,CAACL,KAAK,GAAGQ,MAAM;IAClBD,IAAI,CAAC,CAAC;EACR,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,MAAMA,CAACC,IAAI,EAAEC,GAAG,EAAE;EACzB,IAAI,IAAI,CAACC,OAAO,KAAKP,SAAS,EAAE,MAAMQ,KAAK,CAAC,+BAA+B,CAAC;EAC5E,IAAIC,IAAI,GAAG,IAAI,CAACF,OAAO,CAACX,KAAK,GAAG,IAAI,CAACW,OAAO,CAACX,KAAK,IAAI,CAAC,CAAC;EACxD,IAAIS,IAAI,IAAIC,GAAG,EAAE;IACf;IACA,IAAII,SAAS,CAACC,MAAM,GAAG,CAAC,IAAIpB,MAAM,EAAE;MAClC,IAAIqB,IAAI,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACN,SAAS,EAAE,CAAC,CAAC;MACnDJ,GAAG,GAAGf,MAAM,CAAC0B,KAAK,CAACjB,SAAS,EAAEY,IAAI,CAAC;IACrC,CAAC,MAAM,IAAInB,OAAO,CAACa,GAAG,CAAC,EAAE;MACvBA,GAAG,CAACY,OAAO,CAAC,UAASC,GAAG,EAAC;QACvB,CAACV,IAAI,CAACJ,IAAI,CAAC,GAAGI,IAAI,CAACJ,IAAI,CAAC,IAAI,EAAE,EAAEe,IAAI,CAACD,GAAG,CAAC;MAC3C,CAAC,CAAC;MACF,OAAOV,IAAI,CAACJ,IAAI,CAAC,CAACM,MAAM;IAC1B;IACA,OAAO,CAACF,IAAI,CAACJ,IAAI,CAAC,GAAGI,IAAI,CAACJ,IAAI,CAAC,IAAI,EAAE,EAAEe,IAAI,CAACd,GAAG,CAAC;EAClD,CAAC,MAAM,IAAID,IAAI,EAAE;IACf,IAAIgB,GAAG,GAAGZ,IAAI,CAACJ,IAAI,CAAC;IACpB,OAAOI,IAAI,CAACJ,IAAI,CAAC;IACjB,OAAOgB,GAAG,IAAI,EAAE;EAClB,CAAC,MAAM;IACL,IAAI,CAACd,OAAO,CAACX,KAAK,GAAG,CAAC,CAAC;IACvB,OAAOa,IAAI;EACb;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}